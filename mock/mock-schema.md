# 고객 데이터 스키마 설명서

## 개요

이 문서는 `mock.md` 파일에 포함된 고객 데이터의 구조와 각 필드에 대한 설명을 제공합니다.

---

## 데이터 구조

### 기본 정보

| 필드명           | 타입           | 설명                    | 예시                                           |
| ---------------- | -------------- | ----------------------- | ---------------------------------------------- |
| `no`             | number         | 고객 고유 번호          | `4`, `8`, `24`                                 |
| `companyName`    | string         | 기업명                  | `"비전바이오켐"`, `"도쿄일렉트론코리아"`       |
| `companySize`    | string \| null | 기업 규모 등급 (T0~T10) | `"T0"`, `"T5"`, `"T9"`                         |
| `category`       | string         | 사업 구분               | `"채용"`, `"공공"`, `"병원"`, `"성과"`         |
| `productUsage`   | string         | 현재 사용 중인 제품     | `"ATS/역검"`, `"ATS"`, `"역검"`, `"INHR+통합"` |
| `manager`        | string         | 담당 영업사원           | `"이정호"`, `"김택수"`, `"윤상준"`             |
| `renewalDate`    | string \| null | 재계약 예정일           | `"25.10.18"`, `"26.03.31"`, `"25년 12월"`      |
| `contractAmount` | number \| null | 현재 계약 금액 (원)     | `11000000`, `50000000`                         |

---

### 신뢰 지표

| 필드명            | 타입           | 설명              | 예시                       |
| ----------------- | -------------- | ----------------- | -------------------------- |
| `hDot`            | boolean        | 에이치닷 여부     | `true`                     |
| `trustLevel`      | string         | 신뢰 레벨 (P1~P3) | `"P1"`, `"P2"`, `"P3"`     |
| `trustIndex`      | number         | 신뢰 지수 (0~100) | `40`, `28`, `66`           |
| `changeAmount`    | number         | 신뢰지수 변화량   | `4`, `8`, `9`              |
| `changeDirection` | string         | 변화 방향         | `"up"`, `"down"`, `"none"` |
| `rank`            | number \| null | 순위              | `5`                        |

#### 신뢰 레벨 설명

- **P1**: 높은 신뢰 수준 (신뢰지수 80 이상)
- **P2**: 중간 신뢰 수준 (신뢰지수 40~79)
- **P3**: 낮은 신뢰 수준 (신뢰지수 40 미만)

#### ⭐ 신뢰지수 변화 원인

**신뢰지수는 콘텐츠 소비(TOFU/MOFU/BOFU)에 따라 증가/감소합니다.**

| 콘텐츠 유형 | 신뢰지수 증가량 | 설명                            |
| ----------- | --------------- | ------------------------------- |
| **TOFU**    | +1              | 인지 단계 콘텐츠 (트렌드, 동향) |
| **MOFU**    | +2              | 고려 단계 콘텐츠 (사례, 가이드) |
| **BOFU**    | +3              | 결정 단계 콘텐츠 (가격, ROI)    |

> **중요**: 신뢰지수 변동을 분석할 때는 `contentEngagements` (콘텐츠 조회 기록)를 확인해야 합니다. 영업 액션(`salesActions`)은 신뢰지수가 아닌 가능성(`possibility`)과 고객반응(`customerResponse`)에 영향을 미칩니다.

---

### 신뢰 히스토리 (trustHistory)

**주간 단위**로 업데이트되는 신뢰지수와 신뢰레벨의 변화를 기록합니다. 키는 해당 주의 월요일 날짜(MMDD 형식)를 사용합니다.

| 필드명 | 타입   | 설명                   | 기간                    |
| ------ | ------ | ---------------------- | ----------------------- |
| `1104` | object | 11월 1주차 신뢰 데이터 | 11/4 ~ 11/10 (MBM 주간) |
| `1111` | object | 11월 2주차 신뢰 데이터 | 11/11 ~ 11/17           |
| `1118` | object | 11월 3주차 신뢰 데이터 | 11/18 ~ 11/24           |
| `1125` | object | 11월 4주차 신뢰 데이터 | 11/25 ~ 12/1            |
| `1202` | object | 12월 1주차 신뢰 데이터 | 12/2 ~ 12/8             |
| `1209` | object | 12월 2주차 신뢰 데이터 | 12/9 ~ 12/15 (현재)     |

#### 각 주차별 데이터 구조

| 필드명       | 타입   | 설명                        | 예시                   |
| ------------ | ------ | --------------------------- | ---------------------- |
| `trustIndex` | number | 해당 주의 신뢰 지수 (0~100) | `36`, `40`, `66`       |
| `trustLevel` | string | 해당 주의 신뢰 레벨         | `"P1"`, `"P2"`, `"P3"` |

#### 예시

```json
"trustHistory": {
  "1104": { "trustIndex": 36, "trustLevel": "P3" },
  "1111": { "trustIndex": 38, "trustLevel": "P3" },
  "1118": { "trustIndex": 40, "trustLevel": "P2" },
  "1125": { "trustIndex": 40, "trustLevel": "P2" },
  "1202": { "trustIndex": 42, "trustLevel": "P2" },
  "1209": { "trustIndex": 44, "trustLevel": "P2" }
}
```

---

### 영업 액션 (salesActions)

영업 활동 기록을 저장합니다. 배열 형태로 여러 액션을 기록할 수 있습니다.

**⭐ 영업 액션은 가능성(`possibility`)과 고객반응(`customerResponse`)에 영향을 미칩니다.**

| 필드명             | 타입           | 설명                    | 예시                           |
| ------------------ | -------------- | ----------------------- | ------------------------------ |
| `type`             | string         | 액션 종류               | `"call"`, `"meeting"`          |
| `content`          | string         | 액션 상세 내용          | `"제품 소개 및 견적 논의"`     |
| `date`             | string         | 액션 실행 날짜          | `"2024-11-07"`, `"2024-12-18"` |
| `possibility`      | string \| null | 액션 후 변경된 가능성   | `"90%"`, `"40%"`, `"0%"`       |
| `customerResponse` | string \| null | 액션 후 변경된 고객반응 | `"상"`, `"중"`, `"하"`         |
| `targetRevenue`    | number \| null | 액션 후 변경된 목표매출 | `5000000`                      |

#### 액션 종류 (type)

| 값        | 설명           |
| --------- | -------------- |
| `call`    | 전화 통화      |
| `meeting` | 대면/화상 미팅 |

#### 예시

```json
"salesActions": [
  {
    "type": "meeting",
    "content": "데모 시연 및 견적 협의",
    "date": "2024-11-15",
    "possibility": "90%",
    "customerResponse": "상"
  },
  {
    "type": "call",
    "content": "예산 관련 논의 - 내년 예산 확보 어려움",
    "date": "2024-12-05",
    "possibility": "40%",
    "customerResponse": "중"
  }
]
```

> **중요**: 예상 매출(`expectedRevenue`)은 `목표매출(targetRevenue) × 가능성(possibility)`으로 계산됩니다. 따라서 영업 액션으로 가능성이 변하면 예상 매출도 함께 변합니다.

---

### 컨텐츠 조회 기록 (contentEngagements)

고객이 조회한 컨텐츠 기록을 저장합니다. 컨텐츠 조회 시 신뢰지수가 증가합니다. 배열 형태로 여러 컨텐츠 조회 기록을 저장할 수 있습니다.

| 필드명     | 타입   | 설명                 | 예시                           |
| ---------- | ------ | -------------------- | ------------------------------ |
| `title`    | string | 컨텐츠 제목          | `"2024 HR 테크 트렌드 리포트"` |
| `date`     | string | 조회 날짜            | `"2024-11-08"`, `"2024-12-05"` |
| `category` | string | 컨텐츠 퍼널 카테고리 | `"TOFU"`, `"MOFU"`, `"BOFU"`   |

#### 컨텐츠 카테고리 (category)

마케팅 퍼널 단계에 따른 컨텐츠 분류입니다.

| 값     | 영문             | 설명                                            | 컨텐츠 예시                                 |
| ------ | ---------------- | ----------------------------------------------- | ------------------------------------------- |
| `TOFU` | Top of Funnel    | 인지 단계 - 브랜드 인지도 및 산업 트렌드 컨텐츠 | HR 트렌드 리포트, 산업 동향 분석, 미래 전망 |
| `MOFU` | Middle of Funnel | 고려 단계 - 제품/서비스 상세 정보 및 사례 연구  | 기능 가이드, 도입 사례집, 활용 매뉴얼       |
| `BOFU` | Bottom of Funnel | 결정 단계 - 가격, 견적, 도입 프로세스 정보      | 가격 안내서, ROI 분석, 도입 프로세스 가이드 |

#### 예시

```json
"contentEngagements": [
  { "title": "2024 HR 테크 트렌드 리포트", "date": "2024-11-08", "category": "TOFU" },
  { "title": "영상면접 도입 기업 사례집", "date": "2024-11-15", "category": "MOFU" },
  { "title": "영상면접 큐레이터 가격 안내서", "date": "2024-12-10", "category": "BOFU" }
]
```

---

### MBM 이벤트 참석 (attendance)

MBM(Monthly Business Meeting) 세미나 이벤트 참석 여부를 기록합니다. 특정 날짜에 진행되는 이벤트입니다.

| 필드명 | 타입    | 설명                     | 해당 주차  |
| ------ | ------- | ------------------------ | ---------- |
| `1107` | boolean | 11월 7일 MBM 세미나 참석 | 11월 1주차 |
| `1218` | boolean | 12월 18일 후속 미팅 참석 | 12월 3주차 |

> **참고**: MBM 이벤트는 특정 날짜에 진행되며, 신뢰지수는 주간 단위로 별도 업데이트됩니다.

---

### 영업 파이프라인 단계

고객 여정은 3단계로 구성됩니다:

```
신뢰형성 (과일 숙성) → 가치인식 (오함마) → 도입결정 (과일 담기)
```

#### 1. 신뢰형성 (trustFormation)

고객과의 초기 관계 구축 및 관심도 파악 단계입니다.

| 필드명             | 타입           | 설명                          | 예시                                        |
| ------------------ | -------------- | ----------------------------- | ------------------------------------------- |
| `customerResponse` | string         | 고객 반응 수준                | `"상"`, `"중"`, `"하"`                      |
| `targetDate`       | string \| null | 목표 일자                     | `"12월말"`, `"1월말"`, `"11월말"`           |
| `targetRevenueMin` | number \| null | 업크로스셀 추가매출 최소 목표 | `5000000`                                   |
| `targetRevenueMax` | number \| null | 업크로스셀 추가매출 최대 목표 | `32000000`                                  |
| `detail`           | string         | 고객 반응 상세 내용           | 미팅 내용, 관심사항 등                      |
| `interestFunction` | string \| null | 관심 기능/제품                | `"영상면접 큐레이터"`, `"뉴로우"`, `"역검"` |

#### 2. 가치인식 (valueRecognition)

고객이 제품 가치를 인식하고 검토하는 단계입니다.

| 필드명             | 타입           | 설명                 | 예시                       |
| ------------------ | -------------- | -------------------- | -------------------------- |
| `customerResponse` | string         | 고객 반응 수준       | `"상"`, `"중"`, `"하"`     |
| `possibility`      | string         | 도입 가능성          | `"90%"`, `"40%"`, `"0%"`   |
| `targetDate`       | string \| null | 목표 달성 일자       | `"12월"`, `"1월"`, `"2월"` |
| `targetRevenue`    | number \| null | 목표 매출            | `5000000`                  |
| `test`             | boolean        | 테스트 진행 여부     | `true`, `false`            |
| `quote`            | boolean        | 견적서 발송 여부     | `true`, `false`            |
| `approval`         | boolean        | 품의 진행 여부       | `true`, `false`            |
| `contract`         | boolean        | 계약 체결 여부       | `true`, `false`            |
| `simulation`       | number \| null | 시뮬레이션 예상 매출 | `4500000`                  |

#### 3. 도입결정 (adoptionDecision)

최종 도입 결정 및 계약 단계입니다.

| 필드명             | 타입           | 설명                 | 예시                     |
| ------------------ | -------------- | -------------------- | ------------------------ |
| `customerResponse` | string         | 고객 반응 수준       | `"상"`, `"중"`, `"하"`   |
| `possibility`      | string         | 계약 가능성          | `"90%"`, `"40%"`, `"0%"` |
| `targetDate`       | string \| null | 계약 목표 일자       | `"12월"`, `"1월"`        |
| `targetRevenue`    | number \| null | 계약 목표 매출       | `5000000`                |
| `test`             | boolean        | 테스트 완료 여부     | `true`, `false`          |
| `quote`            | boolean        | 견적 확정 여부       | `true`, `false`          |
| `approval`         | boolean        | 품의 승인 여부       | `true`, `false`          |
| `contract`         | boolean        | 계약 완료 여부       | `true`, `false`          |
| `simulation`       | number \| null | 최종 시뮬레이션 매출 | `4500000`                |

---

## 고객 반응 수준 (customerResponse)

| 값   | 설명                   | 가능성 |
| ---- | ---------------------- | ------ |
| `상` | 높은 관심, 적극적 검토 | 90%    |
| `중` | 보통 관심, 조건부 검토 | 40%    |
| `하` | 낮은 관심, 도입 어려움 | 0%     |

---

## 관심 기능 목록 (interestFunction)

| 기능명                  | 설명                                |
| ----------------------- | ----------------------------------- |
| `영상면접 큐레이터`     | AI 기반 영상면접 분석 및 큐레이션   |
| `큐레이터/AI면접가이드` | 면접 질문 생성 및 평가 가이드       |
| `뉴로우`                | 온보딩 프로세스 관리 솔루션         |
| `역검`                  | 역량검사 (SR, Full, Performance 등) |
| `ATS`                   | 지원자 추적 시스템                  |
| `INHR`                  | 성과관리 시스템                     |

---

## 기업 규모 등급 (companySize)

| 등급  | 설명            |
| ----- | --------------- |
| `T0`  | 소규모 기업     |
| `T1`  | 중소기업        |
| `T3`  | 중견기업 (하)   |
| `T5`  | 중견기업 (상)   |
| `T9`  | 대기업          |
| `T10` | 대기업 (최상위) |

---

## 사업 구분 (category)

| 구분   | 설명                  |
| ------ | --------------------- |
| `채용` | 일반 기업 채용 솔루션 |
| `공공` | 공공기관/협회         |
| `병원` | 의료기관              |
| `성과` | 성과관리 솔루션       |

---

## 데이터 활용 예시

### 1. 고가능성 고객 필터링

```javascript
const highPotential = data.filter(
  (customer) => customer.adoptionDecision?.possibility === "90%"
);
```

### 2. 담당자별 고객 그룹핑

```javascript
const byManager = data.reduce((acc, customer) => {
  const manager = customer.manager;
  if (!acc[manager]) acc[manager] = [];
  acc[manager].push(customer);
  return acc;
}, {});
```

### 3. 12월 목표 고객 조회

```javascript
const decemberTargets = data.filter(
  (customer) => customer.adoptionDecision?.targetDate === "12월"
);
```

### 4. 총 예상 매출 계산

```javascript
const totalSimulation = data.reduce((sum, customer) => {
  return sum + (customer.adoptionDecision?.simulation || 0);
}, 0);
```

---

## 데이터 관계 요약

### 지표별 변화 원인

```
┌─────────────────────────────────────────────────────────────────┐
│                      콘텐츠 소비                                │
│              (contentEngagements)                               │
│    TOFU (+1p) / MOFU (+2p) / BOFU (+3p)                        │
│                        ↓                                        │
│              ┌────────────────┐                                │
│              │   신뢰지수     │                                │
│              │  (trustIndex)  │                                │
│              └────────────────┘                                │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      영업 액션                                  │
│               (salesActions)                                    │
│              콜 / 미팅 → 결과                                  │
│                        ↓                                        │
│    ┌──────────────┐         ┌──────────────┐                   │
│    │    가능성    │         │  고객반응    │                   │
│    │ (possibility)│         │(customerRes) │                   │
│    └──────┬───────┘         └──────────────┘                   │
│           │                                                     │
│           ↓                                                     │
│    ┌──────────────┐                                            │
│    │  예상 매출   │ = 목표매출 × 가능성                        │
│    │(expectedRev) │   (90%=0.9, 40%=0.4, 0%=0)                │
│    └──────────────┘                                            │
└─────────────────────────────────────────────────────────────────┘
```

### Summary Card 상세 모달 표시 정보

| Summary Card      | 상세 모달에 표시할 정보          | 원인 데이터          |
| ----------------- | -------------------------------- | -------------------- |
| **예상 매출**     | 영업 액션 히스토리 + 가능성 변화 | `salesActions`       |
| **신뢰지수 변동** | 콘텐츠 소비 히스토리             | `contentEngagements` |
| **가능성 변동**   | 영업 액션 히스토리               | `salesActions`       |

---

## 변경 이력

| 날짜       | 버전 | 변경 내용                                      |
| ---------- | ---- | ---------------------------------------------- |
| 2025-12-09 | 1.0  | 최초 작성                                      |
| 2025-12-11 | 1.1  | 신뢰지수/예상매출/가능성 변화 원인 관계 문서화 |
